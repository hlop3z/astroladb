{
  "components": {
    "schemas": {
      "AuthRole": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "auto_managed": false,
              "default": {
                "expr": "NOW()"
              },
              "semantic": "created_at",
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          },
          "id": {
            "format": "uuid",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "semantic": "id",
              "sql_type": {
                "postgres": "UUID",
                "sqlite": "TEXT"
              }
            }
          },
          "name": {
            "maxLength": 100,
            "type": "string",
            "x-db": {
              "sql_type": {
                "postgres": "VARCHAR(100)",
                "sqlite": "TEXT"
              }
            }
          },
          "updated_at": {
            "format": "date-time",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "auto_managed": false,
              "default": {
                "expr": "NOW()"
              },
              "semantic": "updated_at",
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          }
        },
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at"
        ],
        "type": "object",
        "x-db": {
          "indexes": [
            {
              "columns": [
                "id"
              ],
              "name": "auth_role_pkey",
              "primary": true,
              "unique": true
            },
            {
              "columns": [
                "name"
              ],
              "name": "auth_role_name_key",
              "unique": true
            }
          ],
          "namespace": "auth",
          "primary_key": [
            "id"
          ],
          "relationships": {
            "role": {
              "backref": "role",
              "foreign_key": "role_id",
              "local_key": "id",
              "target": "auth_role_auth_user",
              "target_table": "auth_role_auth_user",
              "type": "has_many"
            },
            "user": {
              "backref": "role",
              "local_key": "id",
              "target": "auth.user",
              "target_table": "auth_user",
              "through": {
                "foreign_key": "user_id",
                "local_key": "role_id",
                "table": "auth_role_auth_user"
              },
              "type": "many_to_many"
            }
          },
          "table": "auth_role",
          "timestamps": true
        }
      },
      "AuthRoleAuthUser": {
        "properties": {
          "role_id": {
            "format": "uuid",
            "type": "string",
            "x-db": {
              "fk": "auth.role.id",
              "inverse_of": "auth_role_auth_user",
              "ref": "auth.role",
              "relation": "role",
              "sql_type": {
                "postgres": "UUID",
                "sqlite": "TEXT"
              }
            }
          },
          "user_id": {
            "format": "uuid",
            "type": "string",
            "x-db": {
              "fk": "auth.user.id",
              "inverse_of": "auth_role_auth_user",
              "ref": "auth.user",
              "relation": "user",
              "sql_type": {
                "postgres": "UUID",
                "sqlite": "TEXT"
              }
            }
          }
        },
        "required": [
          "role_id",
          "user_id"
        ],
        "type": "object",
        "x-db": {
          "indexes": [
            {
              "columns": [
                "role_id"
              ],
              "name": "idx_auth_role_auth_user_role_id"
            },
            {
              "columns": [
                "user_id"
              ],
              "name": "idx_auth_role_auth_user_user_id"
            },
            {
              "columns": [
                "role_id",
                "user_id"
              ],
              "name": "idx_auth_role_auth_user_unique",
              "unique": true
            }
          ],
          "join_table": {
            "left": {
              "column": "role_id",
              "schema": "auth.role"
            },
            "right": {
              "column": "user_id",
              "schema": "auth.user"
            }
          },
          "namespace": "",
          "table": "auth_role_auth_user"
        }
      },
      "AuthUser": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "auto_managed": false,
              "default": {
                "expr": "NOW()"
              },
              "semantic": "created_at",
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          },
          "email": {
            "format": "email",
            "maxLength": 255,
            "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
            "type": "string",
            "x-db": {
              "semantic": "email",
              "sql_type": {
                "postgres": "VARCHAR(255)",
                "sqlite": "TEXT"
              }
            }
          },
          "id": {
            "format": "uuid",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "semantic": "id",
              "sql_type": {
                "postgres": "UUID",
                "sqlite": "TEXT"
              }
            }
          },
          "is_active": {
            "type": "boolean",
            "x-db": {
              "default": true,
              "semantic": "flag",
              "sql_type": {
                "postgres": "BOOLEAN",
                "sqlite": "INTEGER"
              }
            }
          },
          "password": {
            "maxLength": 255,
            "type": "string",
            "writeOnly": true,
            "x-db": {
              "semantic": "password_hash",
              "sql_type": {
                "postgres": "VARCHAR(255)",
                "sqlite": "TEXT"
              }
            }
          },
          "updated_at": {
            "format": "date-time",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "auto_managed": false,
              "default": {
                "expr": "NOW()"
              },
              "semantic": "updated_at",
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          },
          "username": {
            "maxLength": 50,
            "minLength": 3,
            "pattern": "^[a-z0-9_]+$",
            "type": "string",
            "x-db": {
              "semantic": "username",
              "sql_type": {
                "postgres": "VARCHAR(50)",
                "sqlite": "TEXT"
              }
            }
          }
        },
        "required": [
          "email",
          "id",
          "is_active",
          "password",
          "username",
          "created_at",
          "updated_at"
        ],
        "type": "object",
        "x-db": {
          "indexes": [
            {
              "columns": [
                "id"
              ],
              "name": "auth_user_pkey",
              "primary": true,
              "unique": true
            },
            {
              "columns": [
                "email"
              ],
              "name": "auth_user_email_key",
              "unique": true
            },
            {
              "columns": [
                "username"
              ],
              "name": "auth_user_username_key",
              "unique": true
            }
          ],
          "namespace": "auth",
          "primary_key": [
            "id"
          ],
          "relationships": {
            "author": {
              "backref": "author",
              "foreign_key": "author_id",
              "local_key": "id",
              "target": "blog.post",
              "target_table": "blog_post",
              "type": "has_many"
            },
            "role": {
              "backref": "user",
              "local_key": "id",
              "target": "auth.role",
              "target_table": "auth_role",
              "through": {
                "foreign_key": "role_id",
                "local_key": "user_id",
                "table": "auth_role_auth_user"
              },
              "type": "many_to_many"
            },
            "user": {
              "backref": "user",
              "foreign_key": "user_id",
              "local_key": "id",
              "target": "auth_role_auth_user",
              "target_table": "auth_role_auth_user",
              "type": "has_many"
            }
          },
          "table": "auth_user",
          "timestamps": true
        }
      },
      "BlogPost": {
        "properties": {
          "author_id": {
            "format": "uuid",
            "type": "string",
            "x-db": {
              "fk": "auth.user.id",
              "inverse_of": "post",
              "ref": "auth.user",
              "relation": "author",
              "sql_type": {
                "postgres": "UUID",
                "sqlite": "TEXT"
              }
            }
          },
          "body": {
            "type": "string",
            "x-db": {
              "sql_type": {
                "postgres": "TEXT",
                "sqlite": "TEXT"
              }
            }
          },
          "created_at": {
            "format": "date-time",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "auto_managed": false,
              "default": {
                "expr": "NOW()"
              },
              "semantic": "created_at",
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          },
          "deleted_at": {
            "format": "date-time",
            "nullable": true,
            "type": "string",
            "x-db": {
              "auto_managed": false,
              "semantic": "deleted_at",
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          },
          "id": {
            "format": "uuid",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "semantic": "id",
              "sql_type": {
                "postgres": "UUID",
                "sqlite": "TEXT"
              }
            }
          },
          "published_at": {
            "format": "date-time",
            "nullable": true,
            "type": "string",
            "x-db": {
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          },
          "slug": {
            "maxLength": 255,
            "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
            "type": "string",
            "x-db": {
              "sql_type": {
                "postgres": "VARCHAR(255)",
                "sqlite": "TEXT"
              }
            }
          },
          "status": {
            "enum": [
              "draft",
              "published",
              "archived"
            ],
            "type": "string",
            "x-db": {
              "default": "draft",
              "sql_type": {
                "postgres": "VARCHAR(50) CHECK (status IN ('draft', 'published', 'archived'))",
                "sqlite": "TEXT CHECK (status IN ('draft', 'published', 'archived'))"
              }
            }
          },
          "title": {
            "maxLength": 200,
            "type": "string",
            "x-db": {
              "sql_type": {
                "postgres": "VARCHAR(200)",
                "sqlite": "TEXT"
              }
            }
          },
          "updated_at": {
            "format": "date-time",
            "readOnly": true,
            "type": "string",
            "x-db": {
              "auto_managed": false,
              "default": {
                "expr": "NOW()"
              },
              "semantic": "updated_at",
              "sql_type": {
                "postgres": "TIMESTAMPTZ",
                "sqlite": "TEXT"
              }
            }
          }
        },
        "required": [
          "author_id",
          "body",
          "id",
          "slug",
          "status",
          "title",
          "created_at",
          "updated_at"
        ],
        "type": "object",
        "x-db": {
          "indexes": [
            {
              "columns": [
                "id"
              ],
              "name": "blog_post_pkey",
              "primary": true,
              "unique": true
            },
            {
              "columns": [
                "author_id"
              ],
              "name": "blog_post_author_id_idx"
            },
            {
              "columns": [
                "slug"
              ],
              "name": "blog_post_slug_key",
              "unique": true
            }
          ],
          "namespace": "blog",
          "primary_key": [
            "id"
          ],
          "searchable": [
            "title,body"
          ],
          "soft_delete": true,
          "table": "blog_post",
          "timestamps": true
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "bearerFormat": "JWT",
        "scheme": "bearer",
        "type": "http"
      }
    }
  },
  "info": {
    "description": "Auto-generated OpenAPI specification from database schema",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    },
    "title": "Database Schema",
    "version": "1.0.0",
    "x-db": {
      "generator": "alab",
      "version": "1.0.0"
    }
  },
  "openapi": "3.0.3",
  "paths": {
    "/schemas": {
      "get": {
        "operationId": "getSchemas",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "example": {
                  "models": {
                    "auth": [
                      {
                        "columns": [
                          {
                            "name": "id",
                            "type": "uuid"
                          },
                          {
                            "name": "name",
                            "type": "string",
                            "unique": true
                          },
                          {
                            "default": {
                              "expr": "NOW()"
                            },
                            "name": "created_at",
                            "type": "datetime"
                          },
                          {
                            "default": {
                              "expr": "NOW()"
                            },
                            "name": "updated_at",
                            "type": "datetime"
                          }
                        ],
                        "example": {
                          "created_at": "2024-01-15T10:30:00Z",
                          "id": "550e8400-e29b-41d4-a716-446655440000",
                          "name": "John Doe",
                          "updated_at": "2024-01-15T10:30:00Z"
                        },
                        "name": "role",
                        "primary_key": "id",
                        "table": "auth_role",
                        "timestamps": true
                      },
                      {
                        "columns": [
                          {
                            "name": "email",
                            "type": "string",
                            "unique": true
                          },
                          {
                            "name": "id",
                            "type": "uuid"
                          },
                          {
                            "default": true,
                            "name": "is_active",
                            "type": "boolean"
                          },
                          {
                            "name": "password",
                            "type": "string"
                          },
                          {
                            "name": "username",
                            "type": "string",
                            "unique": true
                          },
                          {
                            "default": {
                              "expr": "NOW()"
                            },
                            "name": "created_at",
                            "type": "datetime"
                          },
                          {
                            "default": {
                              "expr": "NOW()"
                            },
                            "name": "updated_at",
                            "type": "datetime"
                          }
                        ],
                        "example": {
                          "created_at": "2024-01-15T10:30:00Z",
                          "email": "user@example.com",
                          "id": "550e8400-e29b-41d4-a716-446655440000",
                          "is_active": true,
                          "updated_at": "2024-01-15T10:30:00Z",
                          "username": "johndoe"
                        },
                        "name": "user",
                        "primary_key": "id",
                        "table": "auth_user",
                        "timestamps": true
                      }
                    ],
                    "blog": [
                      {
                        "columns": [
                          {
                            "name": "author_id",
                            "ref": "auth.user",
                            "type": "uuid"
                          },
                          {
                            "name": "body",
                            "type": "text"
                          },
                          {
                            "name": "id",
                            "type": "uuid"
                          },
                          {
                            "name": "published_at",
                            "nullable": true,
                            "type": "datetime"
                          },
                          {
                            "name": "slug",
                            "type": "string",
                            "unique": true
                          },
                          {
                            "default": "draft",
                            "enum": [
                              "draft",
                              "published",
                              "archived"
                            ],
                            "name": "status",
                            "type": "enum"
                          },
                          {
                            "name": "title",
                            "type": "string"
                          },
                          {
                            "default": {
                              "expr": "NOW()"
                            },
                            "name": "created_at",
                            "type": "datetime"
                          },
                          {
                            "default": {
                              "expr": "NOW()"
                            },
                            "name": "updated_at",
                            "type": "datetime"
                          },
                          {
                            "name": "deleted_at",
                            "nullable": true,
                            "type": "datetime"
                          }
                        ],
                        "example": {
                          "author_id": "550e8400-e29b-41d4-a716-446655440000",
                          "body": "This is a sample description text.",
                          "created_at": "2024-01-15T10:30:00Z",
                          "deleted_at": null,
                          "id": "550e8400-e29b-41d4-a716-446655440000",
                          "published_at": "2024-01-15T10:30:00Z",
                          "slug": "sample-title",
                          "status": "draft",
                          "title": "Sample Title",
                          "updated_at": "2024-01-15T10:30:00Z"
                        },
                        "foreign_keys": [
                          {
                            "column": "author_id",
                            "ref": "auth.user"
                          }
                        ],
                        "name": "post",
                        "primary_key": "id",
                        "soft_delete": true,
                        "table": "blog_post",
                        "timestamps": true
                      }
                    ]
                  },
                  "relationships": {
                    "auth": [
                      {
                        "columns": [
                          {
                            "name": "role_id",
                            "ref": "auth.role",
                            "type": "uuid"
                          },
                          {
                            "name": "user_id",
                            "ref": "auth.user",
                            "type": "uuid"
                          }
                        ],
                        "example": {
                          "role_id": "550e8400-e29b-41d4-a716-446655440000",
                          "user_id": "550e8400-e29b-41d4-a716-446655440000"
                        },
                        "links": [
                          "auth.role",
                          "auth.user"
                        ],
                        "table": "auth_role_auth_user"
                      }
                    ]
                  }
                }
              }
            },
            "description": "All models and relationships with examples"
          }
        },
        "summary": "All database schemas",
        "tags": [
          "schemas"
        ]
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "servers": [
    {
      "description": "API server",
      "url": "/api/v1"
    }
  ]
}